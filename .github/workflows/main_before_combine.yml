# .github/workflows/main.yml

name: Run Python Scripts Daily(brefore_combine)

on:
  # 1. ìˆ˜ë™ ì‹¤í–‰ (Manual trigger) ì„¤ì •
  workflow_dispatch:

  # 2. ìŠ¤ì¼€ì¤„ ì‹¤í–‰ (Scheduled trigger) ì„¤ì •: ë§¤ì¼ í•œêµ­ ì‹œê°„ ì˜¤ì „ 6ì‹œ
  # UTC ê¸°ì¤€ ì‹œê°„ìœ¼ë¡œ ë³€í™˜í•´ì•¼ í•©ë‹ˆë‹¤. í•œêµ­ ì‹œê°„ (KST)ì€ UTC+9 ì´ë¯€ë¡œ,
  # í•œêµ­ ì‹œê°„ ì˜¤ì „ 6ì‹œëŠ” UTC ê¸°ì¤€ ì˜¤í›„ 9ì‹œ (21ì‹œ)ì…ë‹ˆë‹¤.
  # schedule:
    # '0 21 * * *' : ë§¤ì¼ 21ì‹œ 0ë¶„ì— ì‹¤í–‰ (UTC ê¸°ì¤€)
    # - cron: '0 21 * * *'

jobs:
  build:
    runs-on: ubuntu-latest
    
    # ì‘ì—… í™˜ê²½ ì„¤ì •
    steps:
      - name: Checkout repository
        # ì €ì¥ì†Œ ì½”ë“œë¥¼ ì›Œí¬í”Œë¡œ ëŸ¬ë„ˆë¡œ ê°€ì ¸ì˜µë‹ˆë‹¤.
        uses: actions/checkout@v4

      - name: Set up Python
        # Python 3.10 ë²„ì „ì„ ì„¤ì •í•©ë‹ˆë‹¤.
        uses: actions/setup-python@v4
        with:
          python-version: '3.14'

      - name: Install dependencies
        # 3. í•„ìš”í•œ Python ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤.
        run: |
          python -m pip install --upgrade pip
          # Selenium, requests, beautifulsoup4, pandas, webdriver_manager ì„¤ì¹˜
          pip install selenium requests beautifulsoup4 pandas webdriver-manager
        
      # Selenium WebDriver ì„¤ì • (Chrome)
      # GitHub Actions í™˜ê²½ì—ì„œ Seleniumì„ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì¶”ê°€ ì„¤ì •ì…ë‹ˆë‹¤.
      - name: Set up Chrome for Selenium
        run: |
          # Chrome ì„¤ì¹˜ (ubuntu-latest ì´ë¯¸ì§€ì—ëŠ” ë³´í†µ ê¸°ë³¸ì ìœ¼ë¡œ ì„¤ì¹˜ë˜ì–´ ìˆì§€ë§Œ, ëª…ì‹œì ìœ¼ë¡œ ì‹¤í–‰)
          sudo apt-get update
          sudo apt-get install -y google-chrome-stable
          
      # 4. codes/pycode/aitimes.py ì‹¤í–‰ (Selenium ì‚¬ìš© - í—¤ë“œë¦¬ìŠ¤)
      # aitimes.pyëŠ” Seleniumì„ ì‚¬ìš©í•˜ë¯€ë¡œ ë¨¼ì € ì‹¤í–‰í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.
      - name: Run aitimes.py (Headless Selenium)
        run: |
          python codes/pycode/aitimes.py

      # 5. codes/pycode/NIA.py ì‹¤í–‰
      - name: Run NIA.py
        run: |
          python codes/pycode/NIA.py
          
      # 6. codes/pycode/etnews.py ì‹¤í–‰
      - name: Run etnews.py
        run: |
          python codes/pycode/etnews.py

      # 7. codes/pycode/mnd.py ì‹¤í–‰
      - name: Run mnd.py
        run: |
          python codes/pycode/mnd.py      
      
      # 8. codes/pycode/STEPI.py ì‹¤í–‰
      - name: Run STEPI.py
        run: |
          python codes/pycode/STEPI.py               

      # 9. codes/pycode/NIPA.py ì‹¤í–‰
      - name: Run NIPA.py
        run: |
          python codes/pycode/NIPA.py     

      # 10. codes/pycode/KISDI.py ì‹¤í–‰
      - name: Run KISDI.py
        run: |
          python codes/pycode/KISDI.py                          

      # 11. codes/pycode/dapa.py ì‹¤í–‰
      - name: Run dapa.py
        run: |
          python codes/pycode/dapa.py

      # 12. codes/pycode/KISTI.py ì‹¤í–‰
      - name: Run KISTI.py
        run: |
          python codes/pycode/KISTI.py          

      # 13. codes/pycode/iitp.py ì‹¤í–‰
      - name: Run iitp.py
        run: |
          python codes/pycode/iitp.py             

      # 14. codes/pycode/AInews.py ì‹¤í–‰
      - name: Run AInews.py
        run: |
          python codes/pycode/AInews.py              

          # í–¥í›„ ì¶”ê°€ë  ë‹¤ë¥¸ Python ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ì„ ìœ„í•œ ì£¼ì„ ì²˜ë¦¬ëœ ì˜ˆì‹œ
      # - name: Run another_script.py
      #   run: |
      #     python codes/pycode/another_script.py

      # =============================================================
      # ğŸ’¡ ì¶”ê°€ëœ í•µì‹¬ ë‹¨ê³„: ìƒì„±ëœ íŒŒì¼(codes/aitimes.json)ì„ ì €ì¥ì†Œì— ì»¤ë°‹
      # =============================================================
                
      - name: Commit and Push changes
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          file_pattern: 'codes/aitimes.json'
          commit_message: 'Automated NIA data update [skip ci]'
          branch: main # ë˜ëŠ” master (ì‚¬ìš©í•˜ëŠ” ë¸Œëœì¹˜ ì´ë¦„ìœ¼ë¡œ ë³€ê²½)

      - name: Commit and Push changes
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          file_pattern: 'codes/nia.json'
          commit_message: 'Automated NIA data update [skip ci]'
          branch: main # ë˜ëŠ” master (ì‚¬ìš©í•˜ëŠ” ë¸Œëœì¹˜ ì´ë¦„ìœ¼ë¡œ ë³€ê²½)          

      - name: Commit and Push changes
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          file_pattern: 'codes/etnews.json'
          commit_message: 'Automated NIA data update [skip ci]'
          branch: main # ë˜ëŠ” master (ì‚¬ìš©í•˜ëŠ” ë¸Œëœì¹˜ ì´ë¦„ìœ¼ë¡œ ë³€ê²½)          
          
      - name: Commit and Push changes
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          file_pattern: 'codes/mnd.json'
          commit_message: 'Automated NIA data update [skip ci]'
          branch: main # ë˜ëŠ” master (ì‚¬ìš©í•˜ëŠ” ë¸Œëœì¹˜ ì´ë¦„ìœ¼ë¡œ ë³€ê²½)          
      
      - name: Commit and Push changes
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          file_pattern: 'codes/STEPI.json'
          commit_message: 'Automated NIA data update [skip ci]'
          branch: main # ë˜ëŠ” master (ì‚¬ìš©í•˜ëŠ” ë¸Œëœì¹˜ ì´ë¦„ìœ¼ë¡œ ë³€ê²½)      

      - name: Commit and Push changes
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          file_pattern: 'codes/NIPA.json'
          commit_message: 'Automated NIA data update [skip ci]'
          branch: main # ë˜ëŠ” master (ì‚¬ìš©í•˜ëŠ” ë¸Œëœì¹˜ ì´ë¦„ìœ¼ë¡œ ë³€ê²½)                

      - name: Commit and Push changes
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          file_pattern: 'codes/KISDI.json'
          commit_message: 'Automated NIA data update [skip ci]'
          branch: main # ë˜ëŠ” master (ì‚¬ìš©í•˜ëŠ” ë¸Œëœì¹˜ ì´ë¦„ìœ¼ë¡œ ë³€ê²½)                

      - name: Commit and Push changes
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          file_pattern: 'codes/dapa.json'
          commit_message: 'Automated NIA data update [skip ci]'
          branch: main # ë˜ëŠ” master (ì‚¬ìš©í•˜ëŠ” ë¸Œëœì¹˜ ì´ë¦„ìœ¼ë¡œ ë³€ê²½)                

      - name: Commit and Push changes
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          file_pattern: 'codes/KISTI.json'
          commit_message: 'Automated NIA data update [skip ci]'
          branch: main # ë˜ëŠ” master (ì‚¬ìš©í•˜ëŠ” ë¸Œëœì¹˜ ì´ë¦„ìœ¼ë¡œ ë³€ê²½)     

      - name: Commit and Push changes
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          file_pattern: 'codes/iitp.json'
          commit_message: 'Automated NIA data update [skip ci]'
          branch: main # ë˜ëŠ” master (ì‚¬ìš©í•˜ëŠ” ë¸Œëœì¹˜ ì´ë¦„ìœ¼ë¡œ ë³€ê²½)     

      - name: Commit and Push changes
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          file_pattern: 'codes/AInews.json'
          commit_message: 'Automated NIA data update [skip ci]'
          branch: main # ë˜ëŠ” master (ì‚¬ìš©í•˜ëŠ” ë¸Œëœì¹˜ ì´ë¦„ìœ¼ë¡œ ë³€ê²½)     


